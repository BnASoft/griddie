{"version":3,"sources":["griddie.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_typeof","Symbol","iterator","obj","constructor","_toConsumableArray","arr","Array","isArray","arr2","from","_classCallCheck","instance","TypeError","global","factory","exports","module","define","amd","Griddie","this","options","_this","_options","_animationTimeout","_filterTimeout","layout","window","addEventListener","value","_this2","layoutChanges","undefined","Promise","resolve","reject","callback","clear","store","transform","requestAnimationFrame","element","style","transition","transformTimingCSS","concat","items","filter","item","display","forEach","animateWidthAndHeight","clearTimeout","setTimeout","transformTiming","object","changes","then","_this3","_filter","matched","x","matches","unmatched","hiddenMatched","makeRoomBeforeFade","prepareFade","opacityTimingCSS","fade","opacity","clearFade","animate","onFadeEnd","opacityTiming","masonry","rowHeight","parseInt","getComputedStyle","getPropertyValue","rowGap","rowSpan","Math","ceil","querySelector","getBoundingClientRect","height","gridRowEnd","position","width","transformOrigin","margin","_this4","id","scroll","document","body","scrollTop","scrollLeft","gridRect","rect","top","left","itemRect","scaleX","scaleY","_this5","set","children","get"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define('Griddie', factory) :\n    (global.Griddie = factory());\n}(this, (function () { 'use strict';\n\n    const isPromise = object => !!object && (typeof object === 'object' || typeof object === 'function') && typeof object.then === 'function';\n\n    class Griddie {\n        constructor(options) {\n            this._options = {};\n\n            this._animationTimeout = null; // TODO: replace with toolbox.timer ...\n            this._filterTimeout = null; // TODO: replace with toolbox.timer ...\n\n            this.options = options;\n            this.layout();\n            window.addEventListener('resize', () => this.layout());\n        }\n\n        set options(options) {\n            this._options = {\n                ...{\n                    animateWidthAndHeight: true, // TODO: single item exceptions ...\n                    opacityTiming: 300,\n                    transformTiming: 300,\n                    masonry: false\n                },\n                ...options\n            };\n            this._options.transformTimingCSS = this.options.transformTiming / 1000;\n            this._options.opacityTimingCSS = this.options.opacityTiming / 1000;\n            this._options.items = [...this._options.element.children];\n        }\n\n        get options() {\n            return this._options;\n        }\n\n        animate(layoutChanges = () => {}) {\n            const animation = new Promise((resolve, reject) => {\n                const callback = () => {\n                    this.clear();\n                    this.layout(0);\n                    this.store(1);\n                    this.transform(0);\n\n                    requestAnimationFrame(() => {\n                        this._options.element.style.transition = 'height ' + this._options.transformTimingCSS + 's ease';\n                        [...this._options.items].filter(item => item.style.display !== 'none').forEach(item => {\n                            let transition = 'transform ' + this._options.transformTimingCSS + 's ease';\n                            if (this.options.animateWidthAndHeight) {\n                                transition += ', width ' + this._options.transformTimingCSS + 's ease, height ' + this._options.transformTimingCSS + 's ease';\n                            }\n\n                            item.style.transition = transition;\n                        });\n\n                        requestAnimationFrame(() => this.transform(1));\n\n                        clearTimeout(this._animationTimeout);\n                        this._animationTimeout = setTimeout(() => {\n                            this.clear();\n                            resolve();\n                        }, this.options.transformTiming);\n                    });\n                };\n\n                this.clear();\n                this.store(0);\n                this.transform(0);\n\n                const changes = layoutChanges();\n\n                if (isPromise(changes)) {\n                    changes.then(() => callback());\n                } else {\n                    callback();\n                }\n            });\n\n            return animation;\n        }\n\n        filter(filter = '*') {\n            const matched = this._options.items.filter(x => x.matches(filter));\n            const unmatched = this._options.items.filter(x => !x.matches(filter));\n            const hiddenMatched = matched.filter(x => x.style.display === 'none');\n            const makeRoomBeforeFade = matched.length !== hiddenMatched.length;\n            const prepareFade = () => {\n                this._options.items.forEach(item => {\n                    item.style.transition = 'opacity ' + this._options.opacityTimingCSS + 's ease';\n                });\n            };\n            const fade = () => {\n                matched.forEach(item => {\n                    item.style.opacity = 1;\n                });\n\n                unmatched.forEach(item => {\n                    item.style.opacity = 0;\n                });\n            };\n            const clearFade = () => {\n                this._options.items.forEach(item => {\n                    item.style.transition = '';\n                    item.style.opacity = '';\n                });\n\n                matched.forEach(item => {\n                    item.style.display = '';\n                });\n\n                unmatched.forEach(item => {\n                    item.style.display = 'none';\n                });\n            };\n\n            const animation = this.animate(() => {\n                const fadeAfterAnimation = new Promise((resolve, reject) => {\n                    const onFadeEnd = () => {\n                        this.store(0);\n                        this.transform(0);\n                        resolve();\n                    };\n\n                    prepareFade();\n\n                    if (hiddenMatched.length) {\n                        hiddenMatched.forEach(item => {\n                            item.style.opacity = 0;\n                        });\n                    }\n\n                    requestAnimationFrame(() => {\n                        if (hiddenMatched.length) {\n                            hiddenMatched.forEach(item => {\n                                item.style.display = '';\n                            });\n                        }\n\n                        if (hiddenMatched.length && makeRoomBeforeFade) {\n                            requestAnimationFrame(() => onFadeEnd());\n                        } else if (!hiddenMatched.length || (hiddenMatched.length && !makeRoomBeforeFade)) {\n                            requestAnimationFrame(() => {\n                                fade();\n\n                                clearTimeout(this._filterTimeout);\n\n                                this._filterTimeout = setTimeout(() => {\n                                    clearFade();\n\n                                    requestAnimationFrame(() => onFadeEnd());\n                                }, this.options.opacityTiming);\n                            });\n                        }\n                    });\n                });\n\n                return fadeAfterAnimation;\n            });\n\n            animation.then(() => {\n                if (makeRoomBeforeFade) {\n                    prepareFade();\n\n                    requestAnimationFrame(() => {\n                        fade();\n\n                        clearTimeout(this._filterTimeout);\n\n                        this._filterTimeout = setTimeout(() => clearFade(), this.options.opacityTiming);\n                    });\n                }\n            });\n        }\n\n        destroy() {\n            // TODO: do it\n        }\n\n        refresh() {\n            // TODO: do it\n        }\n\n        // TODO: private\n        layout() {\n            if (this._options.masonry) {\n                const rowHeight = parseInt(window.getComputedStyle(this._options.element).getPropertyValue('grid-auto-rows'));\n                const rowGap = parseInt(window.getComputedStyle(this._options.element).getPropertyValue('grid-row-gap'));\n\n                this._options.items.filter(item => item.style.display !== 'none').forEach(item => {\n                    const rowSpan = Math.ceil((item.querySelector('.content').getBoundingClientRect().height + rowGap) / (rowHeight + rowGap));\n                    item.style.gridRowEnd = 'span ' + rowSpan;\n                });\n            }\n        }\n\n        // TODO: private\n        clear() {\n            this._options.element.style.position = '';\n            this._options.element.style.width = '';\n            this._options.element.style.height = '';\n            this._options.element.style.transition = '';\n\n            this._options.items.forEach(item => {\n                item.style.transform = '';\n                item.style.transformOrigin = '';\n                item.style.position = '';\n                item.style.transition = '';\n                item.style.width = '';\n                item.style.height = '';\n                item.style.margin = '';\n            });\n        }\n\n        // TODO: private\n        store(id = 0) {\n            const scroll = {\n                top: document.body.scrollTop,\n                left: document.body.scrollLeft\n            };\n            const gridRect = this._options.element.getBoundingClientRect();\n            if (!('rect' in this._options.element)) {\n                this._options.element.rect = [];\n            }\n            this._options.element.rect[id] = {\n                width: gridRect.width,\n                height: gridRect.height,\n                top: gridRect.top + scroll.top,\n                left: gridRect.left + scroll.left\n            };\n            this._options.items.filter(item => item.style.display !== 'none').forEach(item => {\n                if (!('rect' in item)) {\n                    item.rect = [];\n                }\n                const itemRect = item.getBoundingClientRect();\n                item.rect[id] = {\n                    width: itemRect.width,\n                    height: itemRect.height,\n                    top: itemRect.top + scroll.top - this._options.element.rect[id].top,\n                    left: itemRect.left + scroll.left - this._options.element.rect[id].left,\n                    scaleX: 1,\n                    scaleY: 1\n                };\n                item.rect[id].top = item.rect[id].top >= 0 ? item.rect[id].top : 0;\n                item.rect[id].left = item.rect[id].left >= 0 ? item.rect[id].left : 0;\n                if (id === 1) {\n                    const scaleX = item.rect[0].width / itemRect.width;\n                    const scaleY = item.rect[0].height / itemRect.height;\n                    if (scaleX > 0) {\n                        item.rect[id].scaleX = 1 / scaleX;\n                    }\n                    if (scaleY > 0) {\n                        item.rect[id].scaleY = 1 / scaleY;\n                    }\n                }\n            });\n        }\n\n        // TODO: private\n        transform(id = 0) {\n            this._options.element.style.position = 'relative';\n            this._options.element.style.width = this._options.element.rect[id].width + 'px';\n            this._options.element.style.height = this._options.element.rect[id].height + 'px';\n\n            this._options.items.filter(item => item.style.display !== 'none').forEach(item => {\n                let transform = 'translate3d(' + item.rect[id].left + 'px,' + item.rect[id].top + 'px, 0px)';\n\n                if (!this.options.animateWidthAndHeight) {\n                    transform += ' scale3d(' + item.rect[id].scaleX + ', ' + item.rect[id].scaleY + ', 1)';\n                }\n\n                if (this.options.animateWidthAndHeight || id === 0) {\n                    item.style.width = item.rect[id].width + 'px';\n                    item.style.height = item.rect[id].height + 'px';\n                }\n\n                item.style.margin = 0;\n                item.style.position = 'absolute';\n                item.style.transformOrigin = '0 0 0';\n                item.style.transform = transform;\n            });\n        }\n    }\n\n    return Griddie;\n\n})));\n"],"file":"griddie.min.js"}